<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<meta name="viewport" content="width=device-width, user-scablable=no, inicial-scalable, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0" />
<!--<link rel="stylesheet" href="css/bootstrap.css" />-->
{% block style %}
<style>
	{% include "www/css/bootstrap.css" %}
</style>
{% endblock %}	

<title>COASTAL RANGE VINEYARDS</title>
<style>
  
  .img-tamano{

      width:150px;
      padding:10px;

    }

    .altura {

    	top:150px;


    }
.tamano {

  display: block;
  width: 80%;
  margin-left: auto;
  margin-right: auto;
}

.clockon {

background-color: #229a2a;
color: #fff;

}
.clockout {

background-color: #ad2525;
color: #fff;
}
.break {

background-color: #bfbf14;
color: #fff;
}
.jobcode {

background-color: #17468a;
color: #fff;
}
.view {

background-color: #583086;
color: #fff;
}


	@media only screen and (max-width: 768px) {
    /* For mobile phones: */
    .altura { 

      top:20px;
      padding-bottom:20px;

    }

    .tamano {
}
display: block;
  width: 60%;
  margin-left: auto;
  margin-right: auto;
}
  }
  
</style>


</head>

<body>
	
    <header>
    	<nav class="navbar navbar-default">
          <div class="container">
            <!-- Brand and toggle get grouped for better mobile display -->
            <div class="navbar-header">
              <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1" aria-expanded="false">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
              <a class="navbar-brand" href="#" style="font-family: DosisMedium; font-size: 22px; ">COASTAL RANGE VINEYARDS</a>
            </div>
        
            <!-- Collect the nav links, forms, and other content for toggling -->
            <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
              <ul class="nav navbar-nav navbar-right">
                
                <li class="dropdown">
                  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false" style="font-family: DosisMedium;"><span class="glyphicon glyphicon-user" ></span> Employees <span class="caret"></span></a>
                  <ul class="dropdown-menu">
                    <li><a href="#">See crew list</a></li>
                    <li><a href="#">Create employee sheet</a></li>
                    <li><a href="#">Edit or delete employee sheet</a></li>
                    <li><a href="#">See employee's attendance</a></li>
                   </ul>  
                    
                  
                </li>

              

                
                
                <li class="dropdown">
                  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false" style="font-family: DosisMedium;"><span class="glyphicon glyphicon-calendar"></span> Projects <span class="caret"></span></a>
                  <ul class="dropdown-menu">
                    <li><a href="#">Create new project</a></li>
                    <li><a href="#">Edit or delete project</a></li>
                    <li><a href="#">See project's calendar</a></li>
                  </ul>
                </li>
                
                


                </ul>
                
                
                
                
              
              
            </div><!-- /.navbar-collapse -->

     
          </div><!-- /.container-fluid -->
        </nav>
	
<section>    
    
<div class="container">
	
	
  	<form class="form-signin form-login" role="form">
    <div class="col-md-offset-3 col-md-6">
    <div class="row">
    <button type="button" class="btn clockon btn-lg" id="ClockOn"><span class="glyphicon glyphicon-play"></span>  Clock On </button>
</div>
    <div class="row">
    <button type="button" class="btn break btn-lg"><span class="glyphicon glyphicon-pause"></span> Go on Break </button>
</div>
    <div class="row">
    <button type="button" class="btn clockout btn-lg"><span class="glyphicon glyphicon-stop"></span> Clock Out </button>
</div>
    
    <div class="row">
    <button type="button" class="btn jobcode btn-lg"><span class="glyphicon glyphicon-refresh"></span> Change Job Code </button>
</div>
    <div class="row">
    <button type="button" class="btn view btn-lg"><span class="glyphicon glyphicon-list"></span> View </button>
	<input type=hidden name=employee id="employee" value="{{employee}}">
	<input type=hidden name=employee_name id="employee_name" value="{{employee_name}}">
	<input type=hidden class="form-control" type=text name=att_date id="att_date" value="{{att_date}}">
	<input type=hidden name=status id="status" value="Present">
	<input type=hidden class="form-control" type=text name=company id="company" value="{{company}}">
  </div>
  </div>
		
	</form>	
    </div>
    
</section>    
    
<footer style="background:#333;">
	<div class="container">
    <div class="row">
    	
        
		  <p style="font-family:CrimsonRoman; color:#fff; text-align: center; padding-top: 10px;">Â© 2017 COASTAL RANGE VINEYARDS. All rights reserved.</p>
<img src="{{ "/assets/frappe/images/processsuccess.jpg" }}" width="15%" style="display: block;margin-left: auto;margin-right:auto;" />
        </div>
        
    </div>    
	</div>
</footer>

<!--<script src="js/jquery.js"></script>-->
<script src="js/bootstrap.min.js"></script>

<script type="text/javascript"
		src="/assets/frappe/js/lib/jquery/jquery.min.js"></script>
	<script type="text/javascript"
		src="/assets/js/frappe-web.min.js"></script>
	
	<script type="text/javascript" src="/website_script.js"></script>
	<script type="text/javascript" src="/assets/js/erpnext-web.min.js"></script>
{% block script %}
<script>
				 
window.disable_signup = {{ disable_signup and "true" or "false" }};

window.login = {};


login.bind_events = function() {
	alert("page loaded");
	$("#ClockOn").click(function(event) {	
			alert("click!");
			//event.preventDefault();
			alert("before call");
			/*if(!args.usr || !args.pwd) {
				frappe.msgprint(__("Both attendance and password required"));
				return false;
			}*/
			frappe.call({
					type: "POST",
					args:{
						"employee":$("#employee").val(),
						"employee_name":$("#employee_name").val(),
						"status":$("#status").val(),
						"date":$("#att_date").val(),
						"company":$("#company").val(),
						"cmd":"erpnext.hr.doctype.employee_attendance_tool.employee_attendance_tool.mark_single_employee_attendance",
					
					},					
					freeze: true,
					statusCode: login.login_handlers	
				});
			//alert("after call");
			return false;
		});
}

login.login_handlers = (function() {
	var get_error_handler = function(default_message) {
		return function(xhr, data) {
			if(xhr.responseJSON) {
				data = xhr.responseJSON;
			}

			var message = default_message;
			if (data._server_messages) {
				message = ($.map(JSON.parse(data._server_messages || '[]'), function() {
					// temp fix for messages sent as dict
					try {
						return JSON.parse(v).message;
					} catch (e) {
						return v;
					}
				}) || []).join('<br>') || default_message;
			}

			frappe.msgprint(message);
		};
	}

	var login_handlers = {
		200: function(data) {
			if(data.message=="mark_single_employee_attendance") {
				frappe.msgprint("Attendance created");
			} else if(data.message=="No App") {
				//alert("weird");
				frappe.msgprint(data.message);
			}
		},
		401: get_error_handler(__("Invalid login")),
		417: get_error_handler(__("Oops! Something went wrong"))
	};

	return login_handlers;
})();

frappe.ready(function() {
	alert("ready");
	login.bind_events();

	if (!window.location.hash) {
		window.location.hash = "#login";
	} else {
		$(window).trigger("hashchange");
	}

	$(".form-signup, .form-forgot").removeClass("hide");
	$(document).trigger('login_rendered');
});
</script>
{% endblock %}
</body>
</html>